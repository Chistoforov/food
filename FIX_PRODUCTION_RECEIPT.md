# üö® –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ "Failed to fetch" –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

1. **–û–±–Ω–æ–≤–ª–µ–Ω `vercel.json`** - –¥–æ–±–∞–≤–ª–µ–Ω—ã —è–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è API —Ñ—É–Ω–∫—Ü–∏–π
2. **–ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –∏ –∑–∞–ø—É—à–µ–Ω—ã** –Ω–∞ GitHub
3. Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω–µ—Ç –¥–µ–ø–ª–æ–π (1-2 –º–∏–Ω—É—Ç—ã)

---

## üîß –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ Vercel

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ Vercel

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: https://vercel.com/dashboard
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç **food-sigma-virid**
3. –û—Ç–∫—Ä–æ–π—Ç–µ **Settings** ‚Üí **Environment Variables**

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π PERPLEXITY_API_KEY

**–í–ê–ñ–ù–û:** –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å –∏–º–µ–Ω–µ–º **`PERPLEXITY_API_KEY`** (–±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞ `VITE_`)

#### –ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–µ—Ç:

1. –ù–∞–∂–º–∏—Ç–µ **Add New**
2. **Name:** `PERPLEXITY_API_KEY`
3. **Value:** –í–∞—à API –∫–ª—é—á –æ—Ç Perplexity (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `pplx-...`)
4. **Environment:** –í—ã–±–µ—Ä–∏—Ç–µ –≤—Å–µ (Production, Preview, Development)
5. –ù–∞–∂–º–∏—Ç–µ **Save**

#### –ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –µ—Å—Ç—å:

‚úÖ –û—Ç–ª–∏—á–Ω–æ! –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É.

---

## üîç –®–∞–≥ 3: –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ–ø–ª–æ—è

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É **Deployments** –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞ Vercel
2. –î–æ–∂–¥–∏—Ç–µ—Å—å, –ø–æ–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π (commit: "fix: Add explicit API routing...") –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è
3. –°—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω —Å—Ç–∞—Ç—å **Ready** (–æ–±—ã—á–Ω–æ 1-2 –º–∏–Ω—É—Ç—ã)

---

## üß™ –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://food-sigma-virid.vercel.app/
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å —á–µ–∫
3. ‚úÖ **–î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å!**

---

## üêõ –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### A) –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞

- **Mac:** `Cmd + Shift + R`
- **Windows:** `Ctrl + Shift + R`

### B) –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Vercel

1. Vercel Dashboard ‚Üí **food-sigma-virid**
2. **Functions** ‚Üí –Ω–∞–π–¥–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `perplexity`
3. **Logs** ‚Üí –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—à–∏–±–∫–∏

### C) –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è:

#### –û—à–∏–±–∫–∞: "Perplexity API key not configured"
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤—å—Ç–µ `PERPLEXITY_API_KEY` –≤ Environment Variables (—Å–º. –®–∞–≥ 2)

#### –û—à–∏–±–∫–∞: "404 Not Found" –Ω–∞ /api/perplexity
**–†–µ—à–µ–Ω–∏–µ:** 
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —É—Å–ø–µ—à–Ω–æ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–∞–ø–∫–∞ `/api/` –µ—Å—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏: https://github.com/Chistoforov/food/tree/main/api

#### –û—à–∏–±–∫–∞: "Failed to fetch" –∏–ª–∏ "Network error"
**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí –≤–∫–ª–∞–¥–∫–∞ Network
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å —á–µ–∫
3. –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ `/api/perplexity` –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏
4. –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å **504 Timeout** - –≤–æ–∑–º–æ–∂–Ω–æ, Perplexity API –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ —á–µ—Ä–µ–∑ –º–∏–Ω—É—Ç—É

---

## üìä –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –ù–∞ localhost (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞):
```
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí /api/perplexity ‚Üí Vite Proxy ‚Üí http://localhost:3001 ‚Üí Perplexity API
```

### –ù–∞ production (Vercel):
```
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí /api/perplexity ‚Üí Vercel Serverless Function ‚Üí Perplexity API
```

---

## üí° –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ `vercel.json`:

```json
{
  "rewrites": [
    {
      "source": "/api/(.*)",
      "destination": "/api/$1"
    }
  ],
  "headers": [
    {
      "source": "/api/(.*)",
      "headers": [
        // CORS headers –¥–ª—è API
      ]
    }
  ]
}
```

–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∑–∞–ø—Ä–æ—Å—ã –∫ `/api/perplexity` –±—É–¥—É—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä–ª–µ—Å—Å —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –ø–∞–ø–∫–µ `/api/`.

---

## üìû –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ Vercel (Functions ‚Üí perplexity ‚Üí Logs)
2. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∫–ª–∞–¥–∫—É Console –¥–ª—è –æ—à–∏–±–æ–∫
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `PERPLEXITY_API_KEY` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞ Vercel

---

**–î–∞—Ç–∞:** 28 –æ–∫—Ç—è–±—Ä—è 2025
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é


