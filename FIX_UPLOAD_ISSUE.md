# Исправление проблемы с загрузкой чеков

## Описание проблемы
Пользователь сталкивался с ситуацией, когда после выбора фото чека (через камеру или галерею) в приложении "ничего не происходило". Процесс загрузки не начинался, спиннер не появлялся. Требовалось несколько обновлений приложения, чтобы загрузка заработала.

## Анализ
Основная причина "тишины" (отсутствие реакции UI) — событие `onChange` у скрытого `input type="file"` не срабатывало. Это происходит в двух случаях:
1. Пользователь выбирает тот же самый файл повторно (например, после неудачной попытки), а браузер не считает это изменением, так как значение `value` инпута не изменилось.
2. Компонент перерисовывался (unmount/mount) из-за фоновых обновлений, сбрасывая состояние инпутов.

## Внесенные изменения

### 1. `src/GroceryTrackerApp.tsx`
- **Принудительный сброс значения инпута:** Добавлен обработчик `onClick`, который очищает `value` инпута перед открытием диалога выбора файла.
  ```typescript
  onClick={(e) => (e.target as HTMLInputElement).value = ''}
  ```
  Это гарантирует, что событие `onChange` сработает даже при выборе того же самого файла.
- **Логирование:** Добавлены `console.log` в начало функции `handleFileSelect` для отладки процесса выбора файла.
- **Валидация:** Улучшена логика проверки наличия файла (защита от `null` при отмене выбора).

### 2. `src/services/supabaseService.ts`
- **Таймаут загрузки:** Добавлен 30-секундный таймаут для загрузки изображения в Supabase Storage. Если загрузка зависнет (из-за плохого соединения), она прервется с ошибкой, и пользователь увидит сообщение об ошибке вместо бесконечного ожидания.
- **Исправление типов:** Добавлен пропущенный импорт `UserProfile`, который вызывал ошибку линтера.

## Как проверить
1. Откройте приложение.
2. Нажмите "Загрузить чек" -> "Галерея".
3. Выберите фото. Должен появиться спиннер "Анализируем чек...".
4. Если отменить выбор или произойдет ошибка, попробуйте выбрать ТОТ ЖЕ файл снова. Реакция должна быть немедленной.

