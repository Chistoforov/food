# Руководство по запуску прокси-сервера

## Проблема
При загрузке чека возникала ошибка "Failed to fetch" из-за CORS политики Perplexity API.

## Решение
Создан локальный прокси-сервер, который пересылает запросы к Perplexity API.

## Как запустить приложение

### Вариант 1: Два терминала (рекомендуется)

**Терминал 1 - Прокси-сервер:**
```bash
npm run proxy
```

**Терминал 2 - Основное приложение:**
```bash
npm run dev
```

### Вариант 2: Один терминал (с фоновым процессом)

```bash
# Запустить прокси в фоне
npm run proxy &

# Запустить приложение
npm run dev
```

## Проверка работы

1. Прокси-сервер должен запуститься на `http://localhost:3001`
2. Приложение должно запуститься на `http://localhost:5173`
3. При загрузке чека запросы будут автоматически проходить через прокси

## Что изменилось

- ✅ Создан `proxy-server.js` - простой Express сервер
- ✅ Обновлен `src/services/perplexityService.ts` - теперь использует прокси
- ✅ Установлены зависимости: `express`, `cors`, `dotenv`

## Порты

- **Прокси-сервер**: `3001`
- **Vite Dev Server**: `5173` (стандартный порт Vite)

## Troubleshooting

### Ошибка "Port already in use"
```bash
# Найти процесс на порту 3001
lsof -i :3001

# Убить процесс
kill -9 <PID>
```

### Прокси не работает
1. Убедитесь, что прокси-сервер запущен
2. Проверьте, что `env.local` содержит `VITE_PERPLEXITY_API_KEY`
3. Проверьте консоль браузера на наличие ошибок

