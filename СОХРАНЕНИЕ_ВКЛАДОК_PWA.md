# üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –≤–∫–ª–∞–¥–∫–∏ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –≤ PWA

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–≤–∫–ª—é—á–∞—è pull-to-refresh) –≤—ã –æ—Å—Ç–∞–µ—Ç–µ—Å—å –≤ —Ç–æ–º –∂–µ —Ä–∞–∑–¥–µ–ª–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –≥–¥–µ –±—ã–ª–∏ –¥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.

## üéØ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. **–£–ª—É—á—à–µ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è**

- –¢–µ–∫—É—â–∞—è –≤–∫–ª–∞–¥–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `localStorage` –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è `beforeunload` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –≤—ã–≥—Ä—É–∑–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è `pagehide` –¥–ª—è iOS Safari (–≤–∞–∂–Ω–æ –¥–ª—è PWA –Ω–∞ iPhone)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º–æ–π –≤–∫–ª–∞–¥–∫–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ—à–∏–±–æ–∫

### 2. **–í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å**

- –ü—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–∫–∏ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–µ–Ω–∞–≤—è–∑—á–∏–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å—á–µ–∑–∞–µ—Ç —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –ù–ï-–≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### 3. **CSS —É–ª—É—á—à–µ–Ω–∏—è –¥–ª—è pull-to-refresh**

```css
/* Pull-to-refresh support */
body {
  overscroll-behavior-y: contain;
}

/* –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è iOS */
@supports (-webkit-touch-callout: none) {
  body {
    overscroll-behavior-y: none;
  }
}
```

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

1. **–ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–∫–∏**: –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `localStorage` –ø–æ–¥ –∫–ª—é—á–æ–º `groceryTrackerActiveTab`

2. **–ü–µ—Ä–µ–¥ –≤—ã–≥—Ä—É–∑–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã**: –°–æ–±—ã—Ç–∏—è `beforeunload` –∏ `pagehide` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∞–∂–µ –ø—Ä–∏ –≤–Ω–µ–∑–∞–ø–Ω–æ–º –∑–∞–∫—Ä—ã—Ç–∏–∏

3. **–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**: 
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏ –≤ `localStorage`
   - –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ –≤–∫–ª–∞–¥–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (–æ–¥–Ω–∞ –∏–∑: `home`, `upload`, `products`, `analytics`)
   - –ï—Å–ª–∏ –≤—Å–µ –û–ö - –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞
   - –ï—Å–ª–∏ –Ω–µ—Ç - –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

### –í–∏–∑—É–∞–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

```typescript
// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏:
// 1. –í–∫–ª–∞–¥–∫–∞ –±—ã–ª–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
// 2. –≠—Ç–æ –Ω–µ –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
// 3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –µ—â–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–æ—Å—å –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏
```

## üì± –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ù–∞ –¥–µ—Å–∫—Ç–æ–ø–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ß–µ–∫" –∏–ª–∏ "–ü—Ä–æ–¥—É–∫—Ç—ã"
3. –ù–∞–∂–º–∏—Ç–µ `Cmd+R` (–∏–ª–∏ `Ctrl+R`) –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
4. ‚úÖ –í—ã –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞—Ç—å—Å—è –≤ —Ç–æ–º –∂–µ —Ä–∞–∑–¥–µ–ª–µ

### –í PWA (–º–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–∞–∫ PWA (–¥–æ–±–∞–≤—å—Ç–µ –Ω–∞ –¥–æ–º–∞—à–Ω–∏–π —ç–∫—Ä–∞–Ω)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ß–µ–∫" –∏–ª–∏ "–ü—Ä–æ–¥—É–∫—Ç—ã"
3. –ü–æ—Ç—è–Ω–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤–Ω–∏–∑ (pull-to-refresh)
4. ‚úÖ –í—ã –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞—Ç—å—Å—è –≤ —Ç–æ–º –∂–µ —Ä–∞–∑–¥–µ–ª–µ
5. ‚úÖ –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–†–∞–∑–¥–µ–ª –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è"

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π

```typescript
// beforeunload - –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
window.addEventListener('beforeunload', handleBeforeUnload);

// pagehide - –¥–ª—è iOS Safari –≤ —Ä–µ–∂–∏–º–µ PWA
window.addEventListener('pagehide', handlePageHide);
```

### localStorage –∫–ª—é—á–∏

- `groceryTrackerActiveTab` - —Ç–µ–∫—É—â–∞—è –∞–∫—Ç–∏–≤–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞
- `groceryTrackerWasRestored` - —Ñ–ª–∞–≥ –¥–ª—è –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–≥–æ –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–∫–ª–∞–¥–∫–∏

- `home` - –ì–ª–∞–≤–Ω–∞—è
- `upload` - –ß–µ–∫
- `products` - –ü—Ä–æ–¥—É–∫—Ç—ã
- `analytics` - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

## üîç –û—Ç–ª–∞–¥–∫–∞

–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –≤—ã —É–≤–∏–¥–∏—Ç–µ –ª–æ–≥–∏:

```
üîÑ –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤–∫–ª–∞–¥–∫—É –∏–∑ localStorage: upload
üíæ –°–æ—Ö—Ä–∞–Ω–∏–ª–∏ —Ç–µ–∫—É—â—É—é –≤–∫–ª–∞–¥–∫—É: upload
üíæ –°–æ—Ö—Ä–∞–Ω–∏–ª–∏ –≤–∫–ª–∞–¥–∫—É –ø–µ—Ä–µ–¥ –≤—ã–≥—Ä—É–∑–∫–æ–π: upload
üíæ –°–æ—Ö—Ä–∞–Ω–∏–ª–∏ –≤–∫–ª–∞–¥–∫—É –ø—Ä–∏ pagehide: upload
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

1. **–ü—Ä–∏–≤–∞—Ç–Ω—ã–π —Ä–µ–∂–∏–º**: –í —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ/–ø—Ä–∏–≤–∞—Ç–Ω–æ–º —Ä–µ–∂–∏–º–µ localStorage –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å
2. **–û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞**: –ü—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±—É–¥–µ—Ç —Å–±—Ä–æ—à–µ–Ω–æ
3. **–†–∞–∑–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞**: –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

## üé® –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç

### –î–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
‚ùå –û—Ç–∫—Ä—ã–ª–∏ —Ä–∞–∑–¥–µ–ª "–ß–µ–∫" ‚Üí –û–±–Ω–æ–≤–∏–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É ‚Üí –û–∫–∞–∑–∞–ª–∏—Å—å –Ω–∞ "–ì–ª–∞–≤–Ω–æ–π"

### –ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
‚úÖ –û—Ç–∫—Ä—ã–ª–∏ —Ä–∞–∑–¥–µ–ª "–ß–µ–∫" ‚Üí –û–±–Ω–æ–≤–∏–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É ‚Üí –û—Å—Ç–∞–ª–∏—Å—å –≤ —Ä–∞–∑–¥–µ–ª–µ "–ß–µ–∫"
‚úÖ –£–≤–∏–¥–µ–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–†–∞–∑–¥–µ–ª –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è"

## üìù –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

1. `src/GroceryTrackerApp.tsx` - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
2. `src/index.css` - CSS –¥–ª—è pull-to-refresh –∏ –∞–Ω–∏–º–∞—Ü–∏–π

## üöÄ –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –º–µ—Å—è—Ü–∞** - –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –≤–∫–ª–∞–¥–∫—É, –Ω–æ –∏ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –º–µ—Å—è—Ü –Ω–∞ –≥–ª–∞–≤–Ω–æ–π
2. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ —Å–∫—Ä–æ–ª–ª–∞** - –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –∫ —Ç–æ–º—É –∂–µ –º–µ—Å—Ç—É –≤ —Å–ø–∏—Å–∫–µ
3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤** - –µ—Å–ª–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä—ã –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ
4. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –æ–±–ª–∞–∫–æ** - –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç  
**–î–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**: 2 –Ω–æ—è–±—Ä—è 2025  
**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: iOS Safari, Chrome, Firefox, Edge (PWA —Ä–µ–∂–∏–º)

