# Исправление проблемы с загрузкой чеков (Trigger Fix)

## Проблема
Пользователь сообщал, что при попытке сфотографировать чек через приложение иногда "ничего не происходит" — надпись о загрузке не появляется, процесс не запускается. Приходилось пробовать несколько раз.

## Причина
В файле `GroceryTrackerApp.tsx` компонент `UploadPage` (отвечающий за загрузку) был определен **внутри** основного компонента приложения `GroceryTrackerApp`.

Это является анти-паттерном React. При каждом перерендере родительского компонента (например, при обновлении данных, фокусе окна или других событиях) компонент `UploadPage` создавался заново как новая функция. React воспринимал это как совершенно новый компонент, полностью удалял старый (unmount) и создавал новый (mount).

В результате:
1. DOM-элемент `<input type="file" />` удалялся и создавался заново.
2. Если пользователь взаимодействовал с камерой, и в это время происходило обновление (например, resize event при повороте экрана или фоновое обновление данных), ссылка на инпут терялась.
3. Событие `onChange` от старого инпута не могло быть обработано новым инпутом.

## Решение
Мы вынесли компоненты `UploadPage` и `ReceiptDetailModal` в отдельные файлы:
- `src/components/UploadPage.tsx`
- `src/components/ReceiptDetailModal.tsx`

Теперь `GroceryTrackerApp` просто импортирует их. Ссылка на компонент остается стабильной, и React перерисовывает только изменившиеся пропсы, сохраняя DOM-дерево и слушатели событий.

Это должно гарантировать, что процесс выбора файла и срабатывания триггера загрузки будет работать стабильно, даже если приложение обновляется в фоне.

## Как проверить
1. Откройте вкладку загрузки чека.
2. Нажмите "Камера" или "Галерея".
3. Сделайте фото или выберите файл.
4. Приложение должно немедленно показать статус "Анализируем чек...".

