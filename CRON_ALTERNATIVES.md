# üïê –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã CRON –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤

## ‚úÖ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

–í—ã —É–∂–µ –ø—Ä–∏–º–µ–Ω–∏–ª–∏ **IMPROVED_TRIGGER_WITH_AUTO_UPDATE.sql** - —ç—Ç–æ —Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ!

–¢–µ–ø–µ—Ä—å —Å—Ç–∞—Ç—É—Å—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —á–µ–∫–∞
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–∞
- ‚úÖ –õ—é–±–æ–º UPDATE –≤ —Ç–∞–±–ª–∏—Ü–µ products

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞ —Å CRON

–£ –≤–∞—Å:
- –£–∂–µ –µ—Å—Ç—å CRON job –Ω–∞ 1:00 –Ω–æ—á–∏
- –¢–∞—Ä–∏—Ñ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ 1 CRON –≤ —Å—É—Ç–∫–∏
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ `pg_cron` –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ (Free tier)

## üîß –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –î–æ–±–∞–≤–∏—Ç—å –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π CRON ‚≠ê –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø

**–§–∞–π–ª—ã:**
1. `CHECK_EXISTING_CRON.sql` - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â–∏–π CRON
2. `ADD_TO_EXISTING_CRON.sql` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é

**–ü–ª—é—Å—ã:**
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- ‚úÖ –ù–µ –Ω—É–∂–µ–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π CRON
- ‚úÖ –°—Ç–∞—Ç—É—Å—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–∞–∂–¥—É—é –Ω–æ—á—å

**–ú–∏–Ω—É—Å—ã:**
- –ù—É–∂–Ω–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π CRON

**–ö–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å:**
1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ `CHECK_EXISTING_CRON.sql`
2. –ü–æ–∫–∞–∂–∏—Ç–µ –º–Ω–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
3. –Ø —Å–æ–∑–¥–∞–º —Ç–æ—á–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤–∞—à–µ–≥–æ CRON

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –û–±–æ–π—Ç–∏—Å—å –±–µ–∑ CRON ‚≠ê –ü–†–û–°–¢–û–ô

**–ü–ª—é—Å—ã:**
- ‚úÖ –ù–∏—á–µ–≥–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –¥–µ–ª–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ
- ‚úÖ –°—Ç–∞—Ç—É—Å—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —á–µ–∫–æ–≤ (—ç—Ç–æ 90% —Å–ª—É—á–∞–µ–≤)
- ‚úÖ –ü—Ä–æ—Å—Ç–æ –∏ –Ω–∞–¥–µ–∂–Ω–æ

**–ú–∏–Ω—É—Å—ã:**
- ‚ö†Ô∏è –ï—Å–ª–∏ –¥–æ–ª–≥–æ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–∫—É–ø–∞—Ç—å, —Å—Ç–∞—Ç—É—Å—ã –Ω–µ –æ–±–Ω–æ–≤—è—Ç—Å—è
- –ù–æ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –ø–æ–∫—É–ø–∫–µ –≤—Å—ë –æ–±–Ω–æ–≤–∏—Ç—Å—è!

**–ö–æ–≥–¥–∞ —ç—Ç–æ —Ö–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ï—Å–ª–∏ –≤—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ —á–µ–∫–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ (—Ö–æ—Ç—è –±—ã —Ä–∞–∑ –≤ 3-5 –¥–Ω–µ–π)
- –î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —ç—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é

**–§–∞–π–ª:** `MANUAL_UPDATE_STATUSES.sql`

**–ü–ª—é—Å—ã:**
- ‚úÖ –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å
- ‚úÖ –ù–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫

**–ú–∏–Ω—É—Å—ã:**
- –ù—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å –∑–∞–ø—É—Å–∫–∞—Ç—å

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
1. –†–∞–∑ –≤ –Ω–µ–¥–µ–ª—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ)
2. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase SQL Editor
3. –í—Å—Ç–∞–≤—å—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ: `SELECT update_all_product_statuses();`
4. –ì–æ—Ç–æ–≤–æ! –ó–∞–Ω–∏–º–∞–µ—Ç 1-2 —Å–µ–∫—É–Ω–¥—ã

---

### –í–∞—Ä–∏–∞–Ω—Ç 4: –í—ã–∑–æ–≤ –∏–∑ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤ `update_all_product_statuses()` –≤:
- –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –≤ background (–µ—Å–ª–∏ –µ—Å—Ç—å —Ç–∞–∫–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å)

---

## üéØ –ú–æ—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–î–ª—è –Ω–∞—á–∞–ª–∞:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–í–∞—Ä–∏–∞–Ω—Ç 2** (–æ–±–æ–π—Ç–∏—Å—å –±–µ–∑ CRON)

–ü–æ—á–µ–º—É:
1. –í—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ —á–µ–∫–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ ‚Üí —Å—Ç–∞—Ç—É—Å—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
2. –ù–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
3. –ü—Ä–æ—Å—Ç–æ –∏ –Ω–∞–¥–µ–∂–Ω–æ

**–ï—Å–ª–∏ –∑–∞—Ö–æ—Ç–∏—Ç–µ –±–æ–ª—å—à–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏:** 
- –í—ã–ø–æ–ª–Ω–∏—Ç–µ `CHECK_EXISTING_CRON.sql`
- –ü–æ–∫–∞–∂–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- –Ø –ø–æ–º–æ–≥—É –¥–æ–±–∞–≤–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –≤ –≤–∞—à —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π CRON

---

## ‚ùì FAQ

**Q: –ß—Ç–æ –µ—Å–ª–∏ —è –Ω–µ –±—É–¥—É –¥–æ–±–∞–≤–ª—è—Ç—å —á–µ–∫–∏ –Ω–µ–¥–µ–ª—é?**
A: –°—Ç–∞—Ç—É—Å—ã –Ω–µ –æ–±–Ω–æ–≤—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –Ω–æ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —á–µ–∫–∞ –≤—Å—ë –æ–±–Ω–æ–≤–∏—Ç—Å—è.

**Q: –ö–∞–∫ —á–∞—Å—Ç–æ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å —Ä—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ?**
A: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫ —á–∞—Å—Ç–æ –≤—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ —á–µ–∫–∏. –ï—Å–ª–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç–µ —á–µ–∫–∏ –∫–∞–∂–¥—ã–µ 2-3 –¥–Ω—è - –Ω–µ –Ω—É–∂–Ω–æ –≤–æ–æ–±—â–µ.

**Q: –ß—Ç–æ –ª—É—á—à–µ - –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å CRON –∏–ª–∏ –æ–±–æ–π—Ç–∏—Å—å –±–µ–∑ –Ω–µ–≥–æ?**
A: –ï—Å–ª–∏ –≤—ã —Ä–µ–≥—É–ª—è—Ä–Ω–æ –¥–æ–±–∞–≤–ª—è–µ—Ç–µ —á–µ–∫–∏ - –æ–±–æ–π—Ç–∏—Å—å –±–µ–∑ CRON –ø—Ä–æ—â–µ –∏ –Ω–∞–¥–µ–∂–Ω–µ–µ.

---

## ‚ú® –ò—Ç–æ–≥

**–ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ:**
- ‚úÖ –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —á–µ–∫–æ–≤ —Å—Ç–∞—Ç—É—Å—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏ —Ä–µ—à–µ–Ω–∞

**CRON –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è:**
- –û–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ "—Å —Ç–µ—á–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏" –±–µ–∑ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —á–µ–∫–æ–≤
- –ù–æ —ç—Ç–æ —Ä–µ–¥–∫–∏–π —Å–ª—É—á–∞–π!

**–í—ã –º–æ–∂–µ—Ç–µ —Å–ø–æ–∫–æ–π–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –±–µ–∑ CRON!** üéâ

