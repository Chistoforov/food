# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –û–®–ò–ë–û–ö –ó–ê–ì–†–£–ó–ö–ò –ß–ï–ö–û–í - –ì–û–¢–û–í–û

## üéØ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 1: Localhost - API 401
**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `.env` —Å –∫–ª—é—á–∞–º–∏

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 2: Production - Quantity Error  
**–†–µ—à–µ–Ω–∏–µ:** –ò–∑–º–µ–Ω–∏—Ç—å —Ç–∏–ø `quantity` —Å INTEGER –Ω–∞ DECIMAL(10,3)

---

## üìã –ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨:

### üîß 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Localhost (2 –º–∏–Ω—É—Ç—ã)

**–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:**

```env
VITE_SUPABASE_URL=https://–≤–∞—à-–ø—Ä–æ–µ–∫—Ç.supabase.co
VITE_SUPABASE_ANON_KEY=–≤–∞—à_anon_key
VITE_PERPLEXITY_API_KEY=–≤–∞—à_perplexity_key
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ó–∞–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –≤–∞—à–∏ –Ω–∞—Å—Ç–æ—è—â–∏–µ –∫–ª—é—á–∏!

**–ì–¥–µ –≤–∑—è—Ç—å –∫–ª—é—á–∏:**
- **Supabase URL –∏ Key**: https://supabase.com ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç ‚Üí Settings ‚Üí API
- **Perplexity Key**: https://www.perplexity.ai/settings/api

**–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä—ã:**
```bash
npm run proxy    # –í –æ–¥–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
npm run dev      # –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
```

---

### üîß 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Production (1 –º–∏–Ω—É—Ç–∞)

**–û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard:**
1. https://supabase.com ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç
2. SQL Editor (–ª–µ–≤–æ–µ –º–µ–Ω—é)
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç SQL:

```sql
-- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ quantity –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥—Ä–æ–±–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π (0.5 –∫–≥, 0.14 –∫–≥)
ALTER TABLE product_history 
ALTER COLUMN quantity TYPE DECIMAL(10,3);

-- –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω)
CREATE INDEX IF NOT EXISTS idx_product_history_receipt_id ON product_history(receipt_id);
```

4. –ù–∞–∂–º–∏—Ç–µ **RUN** ‚úÖ

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

### Localhost:
```
http://localhost:5173
‚Üí –ó–∞–≥—Ä—É–∑–∏—Ç—å —á–µ–∫ ‚Üí –í—ã–±—Ä–∞—Ç—å —Ñ–æ—Ç–æ ‚Üí –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å! ‚úÖ
```

### Production:
```
–í–∞—à —Å–∞–π—Ç –Ω–∞ Vercel
‚Üí –ó–∞–≥—Ä—É–∑–∏—Ç—å —á–µ–∫ ‚Üí –í—ã–±—Ä–∞—Ç—å —Ñ–æ—Ç–æ ‚Üí –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å! ‚úÖ
```

---

## üìÅ –ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ –≤ –∫–æ–¥–µ:

### 1. –§–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–∏:
- `migration_fix_quantity_decimal.sql` - –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ë–î

### 2. –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
- `database_schema.sql` - –æ–±–Ω–æ–≤–ª–µ–Ω–æ:
  - `quantity INTEGER` ‚Üí `quantity DECIMAL(10,3)`
  - –î–æ–±–∞–≤–ª–µ–Ω –∏–Ω–¥–µ–∫—Å –¥–ª—è `receipt_id`

### 3. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- `FIX_RECEIPT_UPLOAD_ERRORS.md` (–ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º)
- `–ò–ù–°–¢–†–£–ö–¶–ò–Ø_–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_–ß–ï–ö–û–í.md` (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è)
- –≠—Ç–æ—Ç —Ñ–∞–π–ª (—Ñ–∏–Ω–∞–ª—å–Ω–∞—è —Å–≤–æ–¥–∫–∞)

---

## üìä –ß—Ç–æ —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è:

| –¢–∏–ø | –ü—Ä–∏–º–µ—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ quantity |
|-----|--------|-------------------|
| –¶–µ–ª—ã–µ | 2 –ª–∏—Ç—Ä–∞ –º–æ–ª–æ–∫–∞ | `2.0` |
| –î—Ä–æ–±–Ω—ã–µ | 500 –≥—Ä–∞–º–º —Ç–≤–æ—Ä–æ–≥–∞ | `0.5` (–∫–≥) |
| –ú–∞–ª–µ–Ω—å–∫–∏–µ | 140 –≥—Ä–∞–º–º —á–∏–ø—Å–æ–≤ | `0.14` (–∫–≥) |
| –ë–æ–ª—å—à–∏–µ | 2.5 –∫–≥ —è–±–ª–æ–∫ | `2.5` |

---

## üÜò –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### Localhost 401:
1. ‚úÖ –§–∞–π–ª `.env` —Å–æ–∑–¥–∞–Ω?
2. ‚úÖ –ö–ª—é—á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ?
3. ‚úÖ –ü—Ä–æ–∫—Å–∏ –∑–∞–ø—É—â–µ–Ω? (`npm run proxy`)
4. ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ? (`npm run dev`)

### Production Quantity Error:
1. ‚úÖ SQL –≤—ã–ø–æ–ª–Ω–µ–Ω –≤ Supabase?
2. ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –≤—ã–±—Ä–∞–Ω –≤ Supabase?
3. ‚úÖ –ö—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ –æ—á–∏—â–µ–Ω? (Ctrl+Shift+R)

### –î—Ä—É–≥–∏–µ –æ—à–∏–±–∫–∏:
- –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12)
- –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:

```bash
# 1. –°–æ–∑–¥–∞–π—Ç–µ .env (—Å–º. –≤—ã—à–µ)
# 2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –≤ Supabase (—Å–º. –≤—ã—à–µ)
# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:

npm run proxy    # –¢–µ—Ä–º–∏–Ω–∞–ª 1
npm run dev      # –¢–µ—Ä–º–∏–Ω–∞–ª 2

# 4. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5173
# 5. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —á–µ–∫
# 6. –ì–æ—Ç–æ–≤–æ! üéâ
```

---

## üìû –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã:
1. –ö–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –¢–µ—Ä–º–∏–Ω–∞–ª–∞ —Å –æ—à–∏–±–∫–æ–π
3. Supabase –ª–æ–≥–æ–≤ (–µ—Å–ª–∏ –µ—Å—Ç—å)

**–£—Å–ø–µ—à–Ω–æ–π —Ä–∞–±–æ—Ç—ã! üéâ**

