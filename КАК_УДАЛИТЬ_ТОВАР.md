# Как удалить товар из базы данных

## Быстрая инструкция

1. **Откройте главную страницу** приложения (вкладка "Главная" 🏠)

2. **Найдите товар**, который хотите удалить, в списке "Мои продукты"

3. **Нажмите на иконку корзины** 🗑️ в правом верхнем углу карточки товара

4. **Подтвердите удаление**:
   - Появится окно с предупреждением
   - Прочитайте информацию о последствиях удаления
   - Нажмите **"Да, удалить"** для подтверждения
   - Или нажмите **"Отмена"**, чтобы отменить операцию

5. **Дождитесь завершения**:
   - Появится индикатор "Удаление..."
   - После удаления товар исчезнет из списка
   - Статистика автоматически обновится

## ⚠️ Важно знать

### Что удаляется:
- ✅ Сам товар из базы данных
- ✅ Вся история покупок этого товара
- ✅ Данные из аналитики и графиков

### Что пересчитывается автоматически:
- 📊 Месячная статистика (потраченные деньги, калории)
- 📈 Общая аналитика семьи
- 🔄 Все отчеты обновляются в реальном времени

### ❌ Нельзя отменить
**Удаление необратимо!** После подтверждения восстановить товар и его историю невозможно. Будьте внимательны при удалении.

## Пример использования

### Когда нужно удалить товар:
- 🚫 Вы больше не покупаете этот товар
- 🔄 Товар был добавлен по ошибке
- 🗑️ Хотите очистить базу от старых товаров
- ✏️ Нужно удалить дубликаты

## Визуальный пример

### Шаг 1: Карточка товара
```
┌─────────────────────────────────────┐
│ Молоко 2L              [🟢] [🗑️]   │
│ Kaufland Milch 3.8%                 │
│ Куплено 5 раз                       │
│                                     │
│ Последняя покупка: 21 окт           │
│ Частота: 7 дней                     │
│ Закончится: 28 окт                  │
│                                     │
│ 1240 ккал         €1.89             │
└─────────────────────────────────────┘
      ↑ Нажмите на корзину
```

### Шаг 2: Модалка подтверждения
```
┌─────────────────────────────────────┐
│ ⚠️ Удалить этот товар?              │
│                                     │
│ Вся история покупок и данные о      │
│ "Молоко 2L" будут удалены из базы.  │
│ Статистика будет пересчитана.       │
│ Это действие нельзя отменить.       │
│                                     │
│ [  Да, удалить  ] [   Отмена   ]   │
└─────────────────────────────────────┘
```

### Шаг 3: Процесс удаления
```
┌─────────────────────────────────────┐
│ ⚠️ Удалить этот товар?              │
│                                     │
│ Вся история покупок и данные о      │
│ "Молоко 2L" будут удалены из базы.  │
│ Статистика будет пересчитана.       │
│ Это действие нельзя отменить.       │
│                                     │
│ [   Удаление...   ] [   Отмена   ] │
└─────────────────────────────────────┘
```

## Технические детали

### Что происходит на бэкенде:
1. Удаление записи из таблицы `products`
2. Каскадное удаление всех записей из `product_history`
3. Автоматический пересчет статистики через триггеры БД
4. Обновление всех связанных отчетов

### Логирование:
В консоли браузера (F12) вы увидите:
```
🗑️ Удаляем товар #123
✅ Товар успешно удален из БД
🔄 Пересчитываем всю аналитику...
🔄 Обновляем статистику...
✅ Вся аналитика пересчитана
```

## Возможные проблемы

### Товар не удаляется:
- Проверьте подключение к интернету
- Убедитесь, что вы залогинены в приложении
- Посмотрите ошибки в консоли браузера (F12)

### Статистика не обновилась:
- Подождите несколько секунд
- Нажмите кнопку "Обновить" на карточке статистики
- Обновите страницу браузера (F5)

## Связанные функции

- 🗑️ [Удаление чека](./КАК_УДАЛИТЬ_ЧЕК.md)
- 📊 [Пересчет статистики](./ИСПРАВЛЕНИЕ_СТАТИСТИКИ.md)
- ✏️ [Редактирование товаров](./USAGE.md)

---

**Дата создания**: 31 октября 2025  
**Версия**: 1.0  
**Автор**: Grocery Tracker Team

