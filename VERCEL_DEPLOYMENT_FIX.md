# Исправление проблем деплоя на Vercel

## Проблемы, которые были исправлены:

### 1. Ошибка "supabaseUrl is required"
**Причина:** Переменные окружения не были настроены в Vercel
**Решение:** 
- Обновлен код в `src/lib/supabase.ts` для лучшей обработки ошибок
- Необходимо добавить переменные окружения в настройках Vercel

### 2. CSP (Content Security Policy) ошибки
**Причина:** Строгие настройки безопасности блокировали загрузку скриптов
**Решение:** 
- Обновлен `vercel.json` с правильными CSP заголовками
- Разрешены необходимые домены для Supabase и Perplexity API

### 3. Ошибка 404 для vite.svg
**Причина:** Неправильная конфигурация маршрутов
**Решение:** 
- Обновлены маршруты в `vercel.json`

## Что нужно сделать:

### Шаг 1: Настроить переменные окружения в Vercel
1. Перейти в настройки проекта на Vercel
2. Открыть раздел "Environment Variables"
3. Добавить следующие переменные:

```
VITE_SUPABASE_URL=your_supabase_url_here
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key_here
VITE_PERPLEXITY_API_KEY=your_perplexity_api_key_here
```

4. Убедиться, что переменные доступны для:
   - Production
   - Preview  
   - Development

### Шаг 2: Пересобрать и передеплоить
1. Сделать коммит изменений:
```bash
git add .
git commit -m "Fix Vercel deployment issues"
git push
```

2. Vercel автоматически пересоберет проект с новыми настройками

### Шаг 3: Проверить результат
После деплоя сайт должен работать без ошибок в консоли.

## Дополнительные улучшения:

- Добавлена проверка переменных окружения в коде
- Улучшена обработка ошибок
- Настроены правильные CSP заголовки
- Исправлены маршруты для статических файлов
