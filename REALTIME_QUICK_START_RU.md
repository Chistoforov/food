# üöÄ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Realtime –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ–∫–æ–≤

## –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –≤ –∫–æ–¥–µ ‚úÖ

1. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –≤–∫–ª–∞–¥–∫–∏** - –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—ã –æ—Å—Ç–∞–µ—Ç–µ—Å—å –Ω–∞ —Ç–æ–π –∂–µ –≤–∫–ª–∞–¥–∫–µ
2. **–£–ª—É—á—à–µ–Ω–Ω–∞—è Realtime –ø–æ–¥–ø–∏—Å–∫–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —á–µ–∫–æ–≤
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ** - –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —á–µ–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
4. **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å—è –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å ‚ö†Ô∏è

### –í–∫–ª—é—á–∏—Ç—å Realtime –≤ Supabase (5 –º–∏–Ω—É—Ç)

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [https://supabase.com](https://supabase.com)
   - –í–æ–π–¥–∏—Ç–µ –≤ –ø—Ä–æ–µ–∫—Ç

2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ SQL Editor:**
   - –õ–µ–≤–æ–µ –º–µ–Ω—é ‚Üí **SQL Editor**
   - –ù–∞–∂–º–∏—Ç–µ **New Query**

3. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:**
   ```sql
   -- –í–∫–ª—é—á–∞–µ–º Realtime –¥–ª—è pending_receipts
   ALTER PUBLICATION supabase_realtime ADD TABLE pending_receipts;
   
   -- –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ
   SELECT schemaname, tablename 
   FROM pg_publication_tables 
   WHERE pubname = 'supabase_realtime'
   AND tablename = 'pending_receipts';
   ```

4. **–ù–∞–∂–º–∏—Ç–µ Run** (–∏–ª–∏ F5)

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   ```
   schemaname | tablename
   -----------+------------------
   public     | pending_receipts
   ```
   –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ —ç—Ç—É —Å—Ç—Ä–æ–∫—É - –≤—Å—ë –≥–æ—Ç–æ–≤–æ! ‚úÖ

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± (—á–µ—Ä–µ–∑ UI)

1. –õ–µ–≤–æ–µ –º–µ–Ω—é ‚Üí **Database** ‚Üí **Replication**
2. –ù–∞–π–¥–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É `pending_receipts`
3. –í–∫–ª—é—á–∏—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å ‚úÖ
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)

### 2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —á–µ–∫

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –ª–æ–≥–∏:
```
üîî –°–æ–∑–¥–∞–µ–º realtime –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ pending_receipts –¥–ª—è family: 1
üì° –°—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏: CONNECTING
üì° –°—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏: SUBSCRIBED
‚úÖ –£—Å–ø–µ—à–Ω–æ –ø–æ–¥–ø–∏—Å–∞–ª–∏—Å—å –Ω–∞ realtime –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è pending_receipts
```

### 3. –î–æ–∂–¥–∏—Ç–µ—Å—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–µ–∫–∞

–ö–æ–≥–¥–∞ —á–µ–∫ –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç—Å—è, –≤—ã —É–≤–∏–¥–∏—Ç–µ:
```
üì° Realtime —Å–æ–±—ã—Ç–∏–µ –ø–æ–ª—É—á–µ–Ω–æ: { type: 'UPDATE', ... }
‚úÖ –í—ã–∑—ã–≤–∞–µ–º callback —Å –¥–∞–Ω–Ω—ã–º–∏: { id: 123, status: 'completed', ... }
üîÑ UploadPage: –ó–∞–≥—Ä—É–∂–∞–µ–º pending receipts –∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
‚úÖ UploadPage: –ß–µ–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω, –æ–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
‚è±Ô∏è –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä –∞–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏—è –¥–ª—è —á–µ–∫–∞: 123
```

### 4. –ß–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã:
```
üóëÔ∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π —á–µ–∫: 123
‚úÖ –ß–µ–∫ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω
```

## –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ –≤–∏–¥–∏—Ç–µ "‚úÖ –£—Å–ø–µ—à–Ω–æ –ø–æ–¥–ø–∏—Å–∞–ª–∏—Å—å"

**–ü—Ä–∏—á–∏–Ω–∞:** Realtime –Ω–µ –≤–∫–ª—é—á–µ–Ω –≤ Supabase

**–†–µ—à–µ–Ω–∏–µ:** –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç –≤—ã—à–µ

---

### –ü—Ä–æ–±–ª–µ–º–∞: –í–∏–¥–∏—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É, –Ω–æ —Å–æ–±—ã—Ç–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç

**–ü—Ä–∏—á–∏–Ω–∞:** RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç —Å–æ–±—ã—Ç–∏—è

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª–∏—Ç–∏–∫–∏:
```sql
SELECT policyname, cmd
FROM pg_policies
WHERE tablename = 'pending_receipts';
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è SELECT, INSERT, UPDATE

---

### –ü—Ä–æ–±–ª–µ–º–∞: –°–æ–±—ã—Ç–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç, –Ω–æ UI –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** –û—à–∏–±–∫–∞ –≤ JavaScript

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ (–∫—Ä–∞—Å–Ω—ã–π —Ç–µ–∫—Å—Ç)

---

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –î–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π ‚ùå
- –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤–æ–∑–≤—Ä–∞—Ç –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
- –°—Ç–∞—Ç—É—Å —á–µ–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä—É—á–Ω–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π ‚úÖ
- –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ—Å—Ç–∞–µ—Ç–µ—Å—å –Ω–∞ —Ç–æ–π –∂–µ –≤–∫–ª–∞–¥–∫–µ
- –°—Ç–∞—Ç—É—Å —á–µ–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —á–µ–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## –ì–æ—Ç–æ–≤–æ! üéâ

–ü–æ—Å–ª–µ –≤–∫–ª—é—á–µ–Ω–∏—è Realtime –≤ Supabase –≤—Å—ë –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞–ª–∏—Å—å, —Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤ `REALTIME_SETUP_GUIDE.md`

